<!DOCTYPE html>
<html lang="en">
<head>
  <title>Khá BảnH Generator</title>
  <meta charset="UTF-8">
  <link rel="icon" type="image/ico" href="img/favicon.ico"/>
  <link rel="stylesheet" type="text/css" href="./css/custom.css">
  <!-- Add this to <head> -->
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
  <link
    type="text/css"
    rel="stylesheet"
    href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css"
  />

  <script src="//unpkg.com/@babel/polyfill@latest/dist/polyfill.min.js"></script>
  <script src="//unpkg.com/vue@latest/dist/vue.min.js"></script>
  <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
</head>
<body>
<b-container id="app">
  <h3>Random Cap Generator</h3>
  <div class="d-flex flex-row-reverse bd-highlight">
    <div class="p-2 bd-highlight">
      <span v-if="result">
        <b-button variant="outline-primary" v-on:click="change(input,1)">Lại</b-button>
      </span>
    </div>
    <div style="visibility: hidden;" class="p-2 bd-highlight"><b-button variant="outline-primary">Dummy button</b-button></div>
  </div>
  <b-row>
    <b-col cols="12" sm="12" md="6">
    <b-form-textarea id="input-large" size="lg" type="text" v-model.lazy="input" rows="3"
      max-rows="20" placeholder="Type here" />
    </b-col>
    <b-col id="random_result" cols="12" sm="12" md="6">
    {{change(input.toLowerCase(),0)}}
    </b-col>
  </b-row>
       
</b-container>
<script type="text/javascript">
var app = new Vue({
  el: '#app',
  data: {
    input: '',
    title: 'Random cap generator',
    result: ''
  },
  methods: {
    change: function (text, flag) {
      if (flag == 1) {
        this.result = "";
      }
      var idx = this.getStartingIndex(this.result.toLowerCase(),text);
      this.result = this.result.substr(0,idx);
      for (var i=idx; i<text.length; i++) {
        if (Math.random() > 0.5) {
          this.result += text[i].toLowerCase();
        } else {
          this.result += text[i].toUpperCase();
        }
      }
      return this.result;
    },
    getStartingIndex: function(str1, str2) {
      var min = Math.min(str1.length, str2.length);
      for (var i=0; i<min; i++) {
        if (str1[i] != str2[i]) {
          return i;
        }
      }
      return min;
    },
    newRandomize: function(event) {
      this.result = "420";
     document.getElementById("random_result").innerHTML = this.result;
    }
  }
});
Vue.config.devtools = true;
</script>
</body>